{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{363:function(t,s,a){t.exports=a.p+\"assets/img/WX20210621-231600.c2359fcd.png\"},364:function(t,s,a){t.exports=a.p+\"assets/img/WX20210621-231613.3bc4c2b0.png\"},425:function(t,s,a){\"use strict\";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[n(\"h2\",{attrs:{id:\"同源策略\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#同源策略\"}},[t._v(\"#\")]),t._v(\" 同源策略\")]),t._v(\" \"),n(\"p\",[t._v(\"由于浏览器的同源策略，不允许浏览器进行跨域请求，所谓同源就是协议，域名，端口三者都相同。\")]),t._v(\" \"),n(\"h4\",{attrs:{id:\"同源策略的限制\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#同源策略的限制\"}},[t._v(\"#\")]),t._v(\" 同源策略的限制\")]),t._v(\" \"),n(\"p\",[t._v(\"一下功能受到同源策略的限制，不能在非同源情况下访问\")]),t._v(\" \"),n(\"ul\",[n(\"li\",[n(\"code\",[t._v(\"Cookie、LocalStorage、IndexedDB\")])]),t._v(\" \"),n(\"li\",[n(\"code\",[t._v(\"DOM\")]),t._v(\" 节点\")]),t._v(\" \"),n(\"li\",[n(\"code\",[t._v(\"Ajax\")]),t._v(\" 请求发送后，返回的结果会被浏览器拦截\")])]),t._v(\" \"),n(\"h4\",{attrs:{id:\"不受同源策略限制的标签\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#不受同源策略限制的标签\"}},[t._v(\"#\")]),t._v(\" 不受同源策略限制的标签\")]),t._v(\" \"),n(\"ul\",[n(\"li\",[n(\"code\",[t._v(\"<img src='xxx'/>\")])]),t._v(\" \"),n(\"li\",[n(\"code\",[t._v(\"<link src='xxx'/>\")])]),t._v(\" \"),n(\"li\",[n(\"code\",[t._v(\"<script src='xxx'/>\")])])]),t._v(\" \"),n(\"p\",[t._v(\"跨域请求不是请求发布出去，而是请求可以发送，并且服务器也能正确接收并返回，但是在返回时被浏览器拦截了；\\n而通过表单却可以发起跨域请求，而 \"),n(\"code\",[t._v(\"ajax\")]),t._v(\" 却不行？那是因为如果跨域请求可以访问其他域的内容，\\n并且 \"),n(\"code\",[t._v(\"ajax\")]),t._v(\" 可以响应返回的内容（如果其他域的内容是不安全的，或者是木马），所以浏览器认为这不安全，进行了拦截。\\n但是表单却不会获取请求的内容，所以可以发起跨域请求，但是前面说了，跨域请求服务端可以接收，所以还是存在安全隐患\")]),t._v(\" \"),n(\"h2\",{attrs:{id:\"cors-跨域资源共享\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#cors-跨域资源共享\"}},[t._v(\"#\")]),t._v(\" CORS 跨域资源共享\")]),t._v(\" \"),n(\"p\",[n(\"code\",[t._v(\"CORS\")]),t._v(\" 需要浏览器和服务器同时支持，目前所有浏览器都以支持该功能(IE10+);\\n整个 CORS 通信过程是浏览器自动完成的，浏览器一旦发现 \"),n(\"code\",[t._v(\"AJAX\")]),t._v(\" 发送的是跨域请求，\\n会自动附加一些头信息，有时候还会多发起一次请求（\"),n(\"code\",[t._v(\"OPTIONS\")]),t._v(\" 请求）\")]),t._v(\" \"),n(\"p\",[n(\"strong\",[t._v(\"CORS\")]),t._v(\" 请求分为： 简单请求 和 非简单请求\")]),t._v(\" \"),n(\"h3\",{attrs:{id:\"简单请求\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#简单请求\"}},[t._v(\"#\")]),t._v(\" 简单请求\")]),t._v(\" \"),n(\"p\",[t._v(\"同时满足下面 2 大条件就属于简单请求\")]),t._v(\" \"),n(\"ol\",[n(\"li\",[n(\"p\",[t._v(\"请求方法是下列方法之一:\")]),t._v(\" \"),n(\"ul\",[n(\"li\",[t._v(\"HEADER\")]),t._v(\" \"),n(\"li\",[t._v(\"GET\")]),t._v(\" \"),n(\"li\",[t._v(\"POST\")])])]),t._v(\" \"),n(\"li\",[n(\"p\",[t._v(\"HTTP 头信息包含不超出以下几种字段\")]),t._v(\" \"),n(\"ul\",[n(\"li\",[t._v(\"Accept\")]),t._v(\" \"),n(\"li\",[t._v(\"Accept-Language\")]),t._v(\" \"),n(\"li\",[t._v(\"Content-Language\")]),t._v(\" \"),n(\"li\",[t._v(\"Content-Type: 仅限于以下三个值\\n\"),n(\"ol\",[n(\"li\",[t._v(\"application/x-www-form-urlencoded\")]),t._v(\" \"),n(\"li\",[t._v(\"multipart/form-data\")]),t._v(\" \"),n(\"li\",[t._v(\"text/plain\")])])]),t._v(\" \"),n(\"li\",[t._v(\"Width\")]),t._v(\" \"),n(\"li\",[t._v(\"DPR\")])])])]),t._v(\" \"),n(\"div\",{staticClass:\"language-js line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" xhr \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"XMLHttpRequest\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\nxhr\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"addEventListener\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"load\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[t._v(\"e\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=>\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  console\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"log\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"xhr\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"getAllResponseHeaders\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\nxhr\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"open\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"get\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"http://192.168.4.100:3000/query\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\nxhr\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setRequestHeader\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"Accept\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"all\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\nxhr\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setRequestHeader\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"Accept-Language\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"zh-cn\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\nxhr\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setRequestHeader\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"Content-Language\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"zh-cn\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\nxhr\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setRequestHeader\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"Content-Type\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"text/plain\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\nxhr\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setRequestHeader\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"Width\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"1\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\nxhr\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setRequestHeader\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"DPR\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"1\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\nxhr\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"send\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"null\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])]),t._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"15\")]),n(\"br\")])]),n(\"p\",[t._v(\"如上代码，HTTP 的请求头只包含上面列举的 6 个请求头时，只会发送简单请求，除以上情况以外，会发送非简单请求，\\n且在发送非简单请求之前，会增加一次 \"),n(\"code\",[t._v(\"HTTP\")]),t._v(\" 查询请求，称为 预检请求（方法名: \"),n(\"code\",[t._v(\"OPTIONS\")]),t._v(\"）\")]),t._v(\" \"),n(\"p\",[n(\"img\",{attrs:{src:a(363),alt:\"WX20210621-231600.png\"}})]),t._v(\" \"),n(\"h3\",{attrs:{id:\"非简单请求\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#非简单请求\"}},[t._v(\"#\")]),t._v(\" 非简单请求\")]),t._v(\" \"),n(\"p\",[t._v(\"上述代码增加 2 个请求头设置：\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 自定义请求头\")]),t._v(\"\\nxhr\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setRequestHeader\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"X-Custom-Power\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"kaige\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 修改 Content-Type 的类型\")]),t._v(\"\\nxhr\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setRequestHeader\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"Content-Type\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"application/json\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])]),t._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),n(\"br\")])]),n(\"p\",[t._v(\"此时浏览器在发出正式的请求之前，会先发送一次预检请求，预检请求的部分头信息如下：\")]),t._v(\" \"),n(\"blockquote\",[n(\"p\",[t._v(\"Access-Control-Request-Headers: content-type, x-custom-power\\nAccess-Control-Request-Method: GET\\nCache-Control: no-cache\\nConnection: keep-alive\\nHost: 192.168.4.100:3000\\nOrigin: chrome-search://local-ntp\")])]),t._v(\" \"),n(\"p\",[n(\"img\",{attrs:{src:a(364),alt:\"WX20210621-231613.png\"}})]),t._v(\" \"),n(\"h4\",{attrs:{id:\"预检请求的回应\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#预检请求的回应\"}},[t._v(\"#\")]),t._v(\" 预检请求的回应\")]),t._v(\" \"),n(\"p\",[t._v(\"服务器收到预检请求后，检查 \"),n(\"code\",[t._v(\"Origin、Access-Control-Request-Method\")]),t._v(\" 和 \"),n(\"code\",[t._v(\"Access-Control-Request-Headers\")]),t._v(\"\\n字段以后，确认允许跨域请求，做出相应回应,下面以 \"),n(\"code\",[t._v(\"node\")]),t._v(\" 为例：\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[t._v(\"app\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"all\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"*\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[t._v(\"req\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" res\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" next\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=>\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 此处允许任意跨域请求\")]),t._v(\"\\n  res\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setHeader\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"Access-Control-Allow-Origin\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"*\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 自定义的请求头 X-Custom-Power,Content-Type\")]),t._v(\"\\n  res\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setHeader\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"Access-Control-Allow-Headers\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"X-Custom-Power,Content-Type\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 允许跨域的方法\")]),t._v(\"\\n  res\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"setHeader\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"Access-Control-Allow-Methods\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"PUT,GET\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"next\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])]),t._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),n(\"br\")])]),n(\"h3\",{attrs:{id:\"请求头-和-响应头\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#请求头-和-响应头\"}},[t._v(\"#\")]),t._v(\" 请求头 和 响应头\")]),t._v(\" \"),n(\"p\",[t._v(\"请求头\")]),t._v(\" \"),n(\"ul\",[n(\"li\",[t._v(\"Origin\")])]),t._v(\" \"),n(\"blockquote\",[n(\"p\",[t._v(\"此字段是浏览器自动添加的,如果 \"),n(\"code\",[t._v(\"Origin\")]),t._v(\" 指定的源不在许可范围内，服务器会正常返回一个 HTTP 请求，\\n如果响应头中没有 \"),n(\"code\",[t._v(\"Access-Control-Allow-Origin\")]),t._v(\" 字段且与 \"),n(\"code\",[t._v(\"Origin\")]),t._v(\" 指定的源不匹配（包含关系），\\n则浏览器就知道报错了，会抛出一个错误，这个错误会被 \"),n(\"code\",[t._v(\"XMLHttpRequest\")]),t._v(\" 的 \"),n(\"code\",[t._v(\"onerror\")]),t._v(\" 回调函数捕获\\n注意这种错不能通过 HTTP 状态吗来判断，因为 HTTP 响应码可能是 200\")])]),t._v(\" \"),n(\"ul\",[n(\"li\",[n(\"code\",[t._v(\"Access-Control-Request-Headers\")]),t._v(\" （预检请求中有）\")])]),t._v(\" \"),n(\"blockquote\",[n(\"p\",[t._v(\"指定浏览器的 CORS 请求会会额外发送的 HTTP 头信息字段，通过 \"),n(\"code\",[t._v(\"xhr.setResponseHeader()\")]),t._v(\" 设置\")])]),t._v(\" \"),n(\"ul\",[n(\"li\",[n(\"code\",[t._v(\"Access-Control-Request-Method\")]),t._v(\"（预检请求中有）\")])]),t._v(\" \"),n(\"blockquote\",[n(\"p\",[t._v(\"指定浏览器的 CORS 请求会用到哪些 HTTP 方法，这里是 \"),n(\"code\",[t._v(\"GET\")])])]),t._v(\" \"),n(\"p\",[t._v(\"正因为预检请求中包含了 \"),n(\"code\",[t._v(\"Access-Control-Request-Headers\")]),t._v(\" 和 \"),n(\"code\",[t._v(\"Access-Control-Request-Method\")]),t._v(\"\\n服务端才方便设置允许可以跨域的请求头和方法\")]),t._v(\" \"),n(\"p\",[t._v(\"响应头\")]),t._v(\" \"),n(\"ul\",[n(\"li\",[t._v(\"Access-Control-Allow-Origin\")])]),t._v(\" \"),n(\"blockquote\",[n(\"p\",[t._v(\"设置允许跨域请求的地址（如：\"),n(\"code\",[t._v(\"http://www.example.com\")]),t._v(\"），设置为 \"),n(\"code\",[t._v(\"*\")]),t._v(\" 号表示允许任意的跨域请求\")])]),t._v(\" \"),n(\"ul\",[n(\"li\",[t._v(\"Access-Control-Allow-Headers\")])]),t._v(\" \"),n(\"blockquote\",[n(\"p\",[t._v(\"如果浏览器发起的请求头中包含 \"),n(\"code\",[t._v(\"Access-Control-Request-Headers\")]),t._v(\" 字段，则 \"),n(\"code\",[t._v(\"Access-Control-Allow-Headers\")]),t._v(\"\\n字段是必须的，表明服务器支持的所有请求头信息字段，不限于预检请求中请求的字段\")])]),t._v(\" \"),n(\"ul\",[n(\"li\",[t._v(\"Access-Control-Allow-Methods\")])]),t._v(\" \"),n(\"blockquote\",[n(\"p\",[t._v(\"表明服务器支持的所有跨域请求的方法，注意返回的是所有支持的方法，而不是浏览器请求的那个方法，防止多次发起预检请求\")])]),t._v(\" \"),n(\"ul\",[n(\"li\",[t._v(\"Access-Control-Max-Age\")])]),t._v(\" \"),n(\"blockquote\",[n(\"p\",[t._v(\"可选，弱本次预检请求有效，这只有效期时间，单位秒，在这期间，不用再次发起预检请求\")])]),t._v(\" \"),n(\"ul\",[n(\"li\",[t._v(\"Access-Control-Allow-Credentials\")])]),t._v(\" \"),n(\"blockquote\",[n(\"p\",[t._v(\"表示是否允许发送 \"),n(\"code\",[t._v(\"cookie\")]),t._v(\"。默认情况下 \"),n(\"code\",[t._v(\"cookie\")]),t._v(\" 不包含在 \"),n(\"code\",[t._v(\"CORS\")]),t._v(\" 请求中，设置为 \"),n(\"code\",[t._v(\"true\")]),t._v(\"，表示服务器\\n明确许可 \"),n(\"code\",[t._v(\"cookie\")]),t._v(\" 可以包含在 \"),n(\"code\",[t._v(\"CORS\")]),t._v(\" 请求中一起发送到服务器，并且需要浏览器端设置\\n\"),n(\"code\",[t._v(\"XMLHttpRequest\")]),t._v(\" 对象的 \"),n(\"code\",[t._v(\"withCredentials\")]),t._v(\" 属性为 \"),n(\"code\",[t._v(\"true\")]),t._v(\", 允许浏览器发送 \"),n(\"code\",[t._v(\"cookie\")]),t._v(\"，否则不会处理。\")])]),t._v(\" \"),n(\"ul\",[n(\"li\",[t._v(\"Access-Control-Expose-Headers\")])]),t._v(\" \"),n(\"p\",[t._v(\"可选，发送 \"),n(\"code\",[t._v(\"CORS\")]),t._v(\" 请求时， \"),n(\"code\",[t._v(\"XMLHttpRequest\")]),t._v(\" 对象的 \"),n(\"code\",[t._v(\"getResponseHeader()\")]),t._v(\" 方法，只能拿到 6 个响应头信息:\")]),t._v(\" \"),n(\"ol\",[n(\"li\",[t._v(\"Cache-Control\")]),t._v(\" \"),n(\"li\",[t._v(\"Content-Language\")]),t._v(\" \"),n(\"li\",[t._v(\"Content-Type\")]),t._v(\" \"),n(\"li\",[t._v(\"Expires\")]),t._v(\" \"),n(\"li\",[t._v(\"Last-Modified\")]),t._v(\" \"),n(\"li\",[t._v(\"Pragma\")])]),t._v(\" \"),n(\"p\",[t._v(\"如果想要拿到其他的响应头信息，需要通过 \"),n(\"code\",[t._v(\"Access-Control-Expose-Headers\")]),t._v(\" 来指定：\")]),t._v(\" \"),n(\"blockquote\",[n(\"p\",[n(\"code\",[t._v(\"Access-Control-Expose-Headers: 'ETag,Date,X-Custom-Power'\")])])]),t._v(\" \"),n(\"p\",[n(\"code\",[t._v(\"X-Custom-Power\")]),t._v(\" 为服务端自定义的头信息\")]),t._v(\" \"),n(\"h2\",{attrs:{id:\"其他解决跨域方案\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#其他解决跨域方案\"}},[t._v(\"#\")]),t._v(\" 其他解决跨域方案\")]),t._v(\" \"),n(\"h4\",{attrs:{id:\"img\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#img\"}},[t._v(\"#\")]),t._v(\" img\")]),t._v(\" \"),n(\"p\",[n(\"code\",[t._v(\"img\")]),t._v(\" 标签不受跨域影响\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" img \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Image\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\nimg\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function-variable function\"}},[t._v(\"onload\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"function\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\nimg\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function-variable function\"}},[t._v(\"onerror\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"function\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 通过设置 src ，访问其他网站的链接\")]),t._v(\"\\nimg\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"src \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"http://www.it3315.com/example?name=123\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])]),t._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),n(\"br\")])]),n(\"p\",[t._v(\"但是这种方式只能用于浏览器与服务器单向通信，因为它不能接收到服务器响应的文本，\\n但是由于浏览器的 COBR 限制，并不能访问到\")]),t._v(\" \"),n(\"h4\",{attrs:{id:\"jsonp-需要服务端支持\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#jsonp-需要服务端支持\"}},[t._v(\"#\")]),t._v(\" JSONP（需要服务端支持）\")]),t._v(\" \"),n(\"p\",[n(\"code\",[t._v(\"jsonp\")]),t._v(\" 只支持异步的 \"),n(\"code\",[t._v(\"get\")]),t._v(\" 请求，不支持 \"),n(\"code\",[t._v(\"post\")]),t._v(\",有一定的局限性\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"function\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"handleResponse\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[t._v(\"res\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  console\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"log\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"res\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" script \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" document\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"createElement\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"script\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\nscript\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"src \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"http://192.168.4.100:3000/query?callback=handleResponse\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\ndocument\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"body\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"append\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"script\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])]),t._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),n(\"br\")])]),n(\"p\",[t._v(\"服务端响应 jsonp 请求\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-js line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[t._v(\"app\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"get\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"/query\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[t._v(\"req\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" res\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=>\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" callback \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" req\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"query\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"callback\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 针对jsonp请求的特殊处理\")]),t._v(\"\\n    res\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"end\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token template-string\"}},[n(\"span\",{pre:!0,attrs:{class:\"token template-punctuation string\"}},[t._v(\"`\")]),n(\"span\",{pre:!0,attrs:{class:\"token interpolation\"}},[n(\"span\",{pre:!0,attrs:{class:\"token interpolation-punctuation punctuation\"}},[t._v(\"${\")]),t._v(\"callback\"),n(\"span\",{pre:!0,attrs:{class:\"token interpolation-punctuation punctuation\"}},[t._v(\"}\")])]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"('jsonp success')\")]),n(\"span\",{pre:!0,attrs:{class:\"token template-punctuation string\"}},[t._v(\"`\")])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"else\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    res\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"send\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" data\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"hello world\"')]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])]),t._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),n(\"br\")])]),n(\"h4\",{attrs:{id:\"node-中间代理\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#node-中间代理\"}},[t._v(\"#\")]),t._v(\" Node 中间代理\")]),t._v(\" \"),n(\"p\",[n(\"strong\",[t._v(\"同源策略\")]),t._v(\" 是浏览器需要遵循的标准，但如果是服务器向服务器发送请求，就没有这个限制，通过 \"),n(\"code\",[t._v(\"Node\")]),t._v(\" 中间服务\\n转发浏览器发送的请求到目标服务器，获取数据之后，再返回给浏览器即可\")]),t._v(\" \"),n(\"h4\",{attrs:{id:\"nginx-反向代理\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#nginx-反向代理\"}},[t._v(\"#\")]),t._v(\" Nginx 反向代理\")]),t._v(\" \"),n(\"p\",[t._v(\"通过 \"),n(\"code\",[t._v(\"nginx\")]),t._v(\" 反向代理实现跨域是最简单的跨域方式\")])])}),[],!1,null,null,null);s.default=e.exports}}]);","extractedComments":[]}